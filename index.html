<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>National ID Registration Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        header { background-color: #007BFF; color: white; padding: 15px; }
        .slider img { width: 80%; height: auto; margin: 20px auto; display: block; }
        .stats { font-size: 20px; margin: 20px; }
        canvas { max-width: 600px; margin: auto; display: block; }
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 10px; margin: auto; }
        button { background-color: #007BFF; color: white; border: none; padding: 10px; margin: 5px; cursor: pointer; }
        #adminPanel { display: none; }
    </style>
</head>
<body>

<header>
    <h1>National ID Registration Report</h1>
</header>

<!-- Image Slider -->
<div class="slider">
    <img id="sliderImage" src="" alt="Registration Slide">
</div>

<!-- Daily Registration Numbers -->
<div class="stats">
    <h2>Daily Registrations</h2>
    <p id="totalRegistrations">Total Today: 0</p>
</div>

<!-- Graph -->
<canvas id="registrationChart"></canvas>

<!-- Login Form -->
<div id="loginContainer">
    <h2>Admin Login</h2>
    <input type="password" id="passwordInput" placeholder="Enter Password">
    <button onclick="checkLogin()">Login</button>
</div>

<!-- Admin Panel -->
<div id="adminPanel">
    <h2>Admin Dashboard</h2>

    <h3>Add Registration Partner</h3>
    <input type="text" id="partnerName" placeholder="Partner Name">
    <button onclick="addPartner()">Add</button>

    <h3>Update Registrations</h3>
    <input type="text" id="selectPartner" placeholder="Partner Name">
    <input type="number" id="regNumber" placeholder="Registrations">
    <button onclick="updateRegistrations()">Update</button>

    <h3>Upload Image</h3>
    <input type="file" id="imageUpload">
    <button onclick="uploadImage()">Upload</button>

    <h3>Daily Registration Table</h3>
    <table id="dataTable">
        <tr>
            <th>Date</th>
            <th>Partner</th>
            <th>Registrations</th>
        </tr>
    </table>

    <button onclick="logout()">Logout</button>
</div>

<script>
    let registrations = { "2025-02-08": { "Partner A": 50, "Partner B": 30 } };
    let images = localStorage.getItem("sliderImages") ? JSON.parse(localStorage.getItem("sliderImages")) : ["https://via.placeholder.com/800x400"];
    let currentImageIndex = 0;

    // Image Slider
    function updateSlider() {
        if (images.length > 0) {
            document.getElementById("sliderImage").src = images[currentImageIndex];
            currentImageIndex = (currentImageIndex + 1) % images.length;
        }
    }
    setInterval(updateSlider, 3000);
    updateSlider();

    // Graph Rendering
    function renderChart() {
        let labels = Object.keys(registrations["2025-02-08"]);
        let data = Object.values(registrations["2025-02-08"]);

        new Chart(document.getElementById("registrationChart"), {
            type: "bar",
            data: {
                labels: labels,
                datasets: [{ label: "Registrations", data: data, backgroundColor: ["red", "blue", "green"] }]
            }
        });
    }

    // Admin Login
    function checkLogin() {
        let password = document.getElementById("passwordInput").value;
        if (password === "id2009") {
            document.getElementById("loginContainer").style.display = "none";
            document.getElementById("adminPanel").style.display = "block";
        } else {
            alert("Incorrect Password!");
        }
    }

    // Add Partner
    function addPartner() {
        let partner = document.getElementById("partnerName").value;
        if (partner) {
            registrations["2025-02-08"][partner] = 0;
            renderTable();
            alert("Partner Added!");
        }
    }

    // Update Registrations
    function updateRegistrations() {
        let partner = document.getElementById("selectPartner").value;
        let number = parseInt(document.getElementById("regNumber").value);
        if (registrations["2025-02-08"][partner] !== undefined) {
            registrations["2025-02-08"][partner] = number;
            renderTable();
            renderChart();
            alert("Updated Successfully!");
        } else {
            alert("Partner Not Found!");
        }
    }

    // Render Table
    function renderTable() {
        let table = document.getElementById("dataTable");
        table.innerHTML = "<tr><th>Date</th><th>Partner</th><th>Registrations</th></tr>";

        for (let partner in registrations["2025-02-08"]) {
            let row = `<tr><td>2025-02-08</td><td>${partner}</td><td>${registrations["2025-02-08"][partner]}</td></tr>`;
            table.innerHTML += row;
        }
    }

    // Upload Image
    function uploadImage() {
        let file = document.getElementById("imageUpload").files[0];
        if (file) {
            let reader = new FileReader();
            reader.onload = function (e) {
                images.push(e.target.result);
                localStorage.setItem("sliderImages", JSON.stringify(images));
                alert("Image Uploaded!");
            };
            reader.readAsDataURL(file);
        }
    }

    // Logout
    function logout() {
        document.getElementById("loginContainer").style.display = "block";
        document.getElementById("adminPanel").style.display = "none";
    }

    document.getElementById("totalRegistrations").innerText = `Total Today: ${Object.values(registrations["2025-02-08"]).reduce((a, b) => a + b, 0)}`;
    renderTable();
    renderChart();
</script>

</body>
</html>
