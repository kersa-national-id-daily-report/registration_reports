<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>National ID Registration Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #f5f5f5; }
        header { background-color: #007BFF; color: white; padding: 15px; }
        .slider img { width: 80%; height: 300px; display: block; margin: auto; }
        .stats { font-size: 20px; margin: 20px; }
        canvas { max-width: 600px; margin: 20px auto; display: block; }
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 10px; margin: auto; background-color: white; }
        button { background-color: #007BFF; color: white; border: none; padding: 10px; margin: 5px; cursor: pointer; }
        input, select { padding: 8px; margin: 5px; }
        #adminPanel { display: none; }
        .charts-container { display: flex; flex-wrap: wrap; justify-content: center; }
        .chart-box { flex: 1 1 calc(33% - 20px); margin: 10px; }
    </style>
</head>
<body>

<header>
    <h1>National ID Registration Report</h1>
</header>

<!-- Image Slider -->
<div class="slider">
    <img id="sliderImage" src="" alt="Registration Slide">
</div>

<!-- Daily Registration Table -->
<h2>Daily Registrations</h2>
<table id="dataTable">
    <tr>
        <th>Date</th>
        <th>Partner</th>
        <th>Registrations</th>
    </tr>
</table>

<!-- Graphs Container -->
<h2>Registration Trends</h2>
<div class="charts-container" id="chartsContainer"></div>

<!-- Login Form -->
<div id="loginContainer">
    <h2>Admin Login</h2>
    <input type="password" id="passwordInput" placeholder="Enter Password">
    <button onclick="checkLogin()">Login</button>
</div>

<!-- Admin Panel -->
<div id="adminPanel">
    <h2>Admin Dashboard</h2>

    <!-- Add Partner -->
    <h3>Add Registration Partner</h3>
    <input type="text" id="partnerName" placeholder="Partner Name">
    <button onclick="addPartner()">Add</button>

    <!-- Add Registrations -->
    <h3>Add Registrations</h3>
    <input type="date" id="selectDate">
    <select id="selectPartner"></select>
    <input type="number" id="regNumber" placeholder="Registrations">
    <button onclick="updateRegistrations()">Update</button>

    <!-- Upload Image -->
    <h3>Upload Image</h3>
    <input type="file" id="imageUpload">
    <button onclick="uploadImage()">Upload</button>

    <button onclick="logout()">Logout</button>
</div>

<script>
    let registrations = {
        "2025-02-08": { "Partner A": 50, "Partner B": 30 },
        "2025-02-07": { "Partner A": 40, "Partner C": 20 }
    };
    let images = JSON.parse(localStorage.getItem("sliderImages")) || ["https://via.placeholder.com/800x400"];
    let partners = JSON.parse(localStorage.getItem("partners")) || ["Partner A", "Partner B", "Partner C"];
    let currentImageIndex = 0;

    // Image Slider
    function updateSlider() {
        document.getElementById("sliderImage").src = images[currentImageIndex];
        currentImageIndex = (currentImageIndex + 1) % images.length;
    }
    setInterval(updateSlider, 3000);
    updateSlider();

    // Graph Rendering
    function renderCharts() {
        document.getElementById("chartsContainer").innerHTML = "";
        Object.keys(registrations).forEach((date, index) => {
            if (index % 5 === 0) document.getElementById("chartsContainer").innerHTML += "<br>";
            let canvas = document.createElement("canvas");
            canvas.id = "chart-" + date;
            canvas.classList.add("chart-box");
            document.getElementById("chartsContainer").appendChild(canvas);

            new Chart(canvas, {
                type: "bar",
                data: {
                    labels: Object.keys(registrations[date]),
                    datasets: [{
                        label: `Registrations on ${date}`,
                        data: Object.values(registrations[date]),
                        backgroundColor: ["red", "blue", "green", "yellow", "purple"]
                    }]
                }
            });
        });
    }

    // Admin Login
    function checkLogin() {
        let password = document.getElementById("passwordInput").value;
        if (password === "id2009") {
            document.getElementById("loginContainer").style.display = "none";
            document.getElementById("adminPanel").style.display = "block";
        } else {
            alert("Incorrect Password!");
        }
    }

    // Add Partner
    function addPartner() {
        let partner = document.getElementById("partnerName").value;
        if (partner && !partners.includes(partner)) {
            partners.push(partner);
            localStorage.setItem("partners", JSON.stringify(partners));
            alert("Partner Added!");
            updatePartnerDropdown();
        }
    }

    // Update Registrations
    function updateRegistrations() {
        let date = document.getElementById("selectDate").value;
        let partner = document.getElementById("selectPartner").value;
        let number = parseInt(document.getElementById("regNumber").value);

        if (date && partner && number >= 0) {
            if (!registrations[date]) registrations[date] = {};
            registrations[date][partner] = number;
            alert("Updated Successfully!");
            renderTable();
            renderCharts();
        } else {
            alert("Fill all fields!");
        }
    }

    // Render Table
    function renderTable() {
        let table = document.getElementById("dataTable");
        table.innerHTML = "<tr><th>Date</th><th>Partner</th><th>Registrations</th></tr>";

        Object.keys(registrations).forEach(date => {
            Object.keys(registrations[date]).forEach(partner => {
                let row = `<tr><td>${date}</td><td>${partner}</td><td>${registrations[date][partner]}</td></tr>`;
                table.innerHTML += row;
            });
        });
    }

    // Upload Image
    function uploadImage() {
        let file = document.getElementById("imageUpload").files[0];
        if (file) {
            let reader = new FileReader();
            reader.onload = function (e) {
                images.push(e.target.result);
                localStorage.setItem("sliderImages", JSON.stringify(images));
                alert("Image Uploaded!");
            };
            reader.readAsDataURL(file);
        }
    }

    // Logout
    function logout() {
        document.getElementById("loginContainer").style.display = "block";
        document.getElementById("adminPanel").style.display = "none";
    }

    // Update Partner Dropdown
    function updatePartnerDropdown() {
        let select = document.getElementById("selectPartner");
        select.innerHTML = "";
        partners.forEach(partner => {
            let option = document.createElement("option");
            option.value = partner;
            option.innerText = partner;
            select.appendChild(option);
        });
    }

    renderTable();
    renderCharts();
    updatePartnerDropdown();
</script>

</body>
</html>
